<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emoji Slot Machine</title>
  <style>
    /* Reset and base */
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: #0a0a0a;
      color: #d0f0c0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      user-select: none;
    }

    /* Header styling */
    header {
      background: #062206;
      padding: 15px 20px;
      text-align: center;
      font-weight: 700;
      font-size: 28px;
      letter-spacing: 2px;
      color: #9ef69e;
      text-shadow: 0 0 10px #3e8e3e;
    }

    /* Main content area */
    main {
      flex: 1;
      max-width: 760px;
      margin: 20px auto;
      background: #122612;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 0 40px #3ea53e;
    }

    /* Info text above reels */
    #info {
      font-size: 18px;
      margin-bottom: 15px;
      text-align: center;
      letter-spacing: 0.6px;
      max-width: 760px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Reel container - horizontally spaced reels */
    #reels {
      display: flex;
      justify-content: space-between;
      margin: 20px 0;
    }

    /* Each reel box */
    .reel {
      width: 80px;
      height: 240px; /* 3 symbols * 80px each */
      background: #030;
      border: 3px solid #080;
      border-radius: 12px;
      overflow: hidden; /* hide overflowing stacked symbols */
      box-shadow: inset 0 0 15px #050;
      position: relative;
    }

    /* The container that holds stacked symbols vertically */
    .symbols {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      transition: transform 1.2s cubic-bezier(0.33, 1, 0.68, 1);
    }

    /* Each symbol inside reel */
    .symbol {
      height: 80px;       /* fixed height */
      font-size: 70px;
      line-height: 80px;
      text-align: center;
      user-select: none;
    }

    /* Highlight effect for winning symbols */
    .symbol.highlight {
      text-shadow:
        0 0 8px #bfff00,
        0 0 15px #bfff00,
        0 0 25px #bfff00,
        0 0 40px #bfff00;
    }

    /* Controls area (buttons, selects) */
    #controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    /* Buttons and selects styling */
    button, select {
      background: #073007;
      border: 2px solid #0b520b;
      border-radius: 10px;
      color: #b9efb9;
      font-size: 18px;
      padding: 10px 18px;
      cursor: pointer;
      box-shadow: 0 0 6px #0b520b;
      user-select: none;
      transition: background 0.3s ease;
    }

    /* Hover effect */
    button:hover, select:hover {
      background: #0a860a;
      box-shadow: 0 0 10px #0fdb0f;
    }

    /* Disabled button style */
    button:disabled {
      background: #033003;
      box-shadow: none;
      cursor: not-allowed;
      color: #555;
    }

    /* Message text shown below reels */
    #message {
      font-size: 22px;
      text-align: center;
      min-height: 30px;
      margin-bottom: 20px;
      color: #aaffaa;
      font-weight: 700;
      text-shadow: 0 0 4px #0b540b;
    }

    /* Footer style */
    footer {
      text-align: center;
      font-size: 14px;
      padding: 12px;
      color: #555;
      user-select: none;
    }

    /* Responsive adjustments for smaller screens */
    @media (max-width: 600px) {
      #reels {
        justify-content: center;
        gap: 10px;
      }
      .reel {
        width: 60px;
        height: 180px;
      }
      .symbol {
        font-size: 50px;
        height: 60px;
        line-height: 60px;
      }
      button, select {
        font-size: 16px;
        padding: 8px 14px;
      }
    }
  </style>
</head>
<body>
  <header>üêÉü¶Ö Slot Machine üé∞</header>

  <main>
    <div id="info">
      Credits: <span id="credits">1000</span> | 
      Bet: <span id="bet">10</span> | 
      Wins: <span id="totalWins">0</span> | 
      Spins: <span id="totalSpins">0</span>
    </div>

    <div id="reels">
      <div class="reel"><div class="symbols"></div></div>
      <div class="reel"><div class="symbols"></div></div>
      <div class="reel"><div class="symbols"></div></div>
      <div class="reel"><div class="symbols"></div></div>
    </div>

    <div id="message">Press Spin to start!</div>

    <div id="controls">
      <button id="spinBtn">Spin</button>
      <button id="autoSpinBtn">Auto Spin: OFF</button>
      <select id="betSelect">
        <option value="10">Bet: 10</option>
        <option value="50">Bet: 50</option>
        <option value="100">Bet: 100</option>
        <option value="max">Max</option>
      </select>
    </div>
  </main>

  <footer>
    Slot Machine Demo ¬© 2025
  </footer>

  <!-- (Optional) Sound elements -->
  <audio id="soundSpin" src=""></audio>
  <audio id="soundReelStop" src=""></audio>
  <audio id="soundWin" src=""></audio>

  <script>
    // === Slot Machine Game ===

    // Symbols for the reels (added buffalo, eagle, tiger, wolf)
    const SYMBOLS = ["üêÉ", "ü¶Ö", "üêØ", "üê∫", "üíé", "‚≠ê", "üçí"];

    // Game state
    let credits = 1000;
    let bet = 10;
    let autoSpin = false;
    let totalWins = 0;
    let totalSpins = 0;

    // DOM references
    const creditsEl = document.getElementById("credits");
    const betEl = document.getElementById("bet");
    const winsEl = document.getElementById("totalWins");
    const spinsEl = document.getElementById("totalSpins");
    const messageEl = document.getElementById("message");
    const reels = [...document.querySelectorAll("#reels .symbols")];
    const spinBtn = document.getElementById("spinBtn");
    const autoSpinBtn = document.getElementById("autoSpinBtn");
    const betSelect = document.getElementById("betSelect");

    // Sounds
    const sSpin = document.getElementById("soundSpin");
    const sStop = document.getElementById("soundReelStop");
    const sWin = document.getElementById("soundWin");

    // Update displayed values
    function updateUI() {
      creditsEl.textContent = credits;
      betEl.textContent = bet;
      winsEl.textContent = totalWins;
      spinsEl.textContent = totalSpins;
    }

    // Show a temporary message
    function showMessage(msg) {
      messageEl.textContent = msg;
    }

    // Generate 3 random symbols for a reel
    function getReel() {
      return Array.from({ length: 3 }, () => SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)]);
    }

    // Main spin logic
    async function spin() {
      if (credits < bet) {
        showMessage("‚ùå Not enough credits!");
        autoSpin = false;
        autoSpinBtn.textContent = "Auto Spin: OFF";
        return;
      }

      credits -= bet;
      totalSpins++;
      updateUI();
      showMessage("");

      // Play spin sound
      if (sSpin) { sSpin.currentTime = 0; sSpin.play().catch(()=>{}); }

      const result = reels.map(() => getReel());

      // Animate reels
      for (let i = 0; i < reels.length; i++) {
        const reelDiv = reels[i];
        const extended = [...result[i], ...getReel()];
        reelDiv.style.transition = "none";
        reelDiv.innerHTML = extended.map(s => `<div class="symbol">${s}</div>`).join("");
        reelDiv.style.transform = "translateY(-240px)";
        void reelDiv.offsetWidth; // trigger reflow
        reelDiv.style.transition = "transform 1s ease-out";
        reelDiv.style.transform = "translateY(-480px)";

        setTimeout(() => {
          if (sStop) { sStop.currentTime = 0; sStop.play().catch(()=>{}); }
        }, i * 400);

        await new Promise(r => setTimeout(r, 1200));
      }

      // Check win (middle row)
      const middle = result.map(r => r[1]);
      if (middle.every(s => s === middle[0])) {
        const payout = bet * 10;
        credits += payout;
        totalWins += payout;
        updateUI();
        showMessage(`üéâ JACKPOT! Won ${payout} credits!`);
        if (sWin) { sWin.currentTime = 0; sWin.play().catch(()=>{}); }
      } else {
        showMessage("Try again!");
      }
    }

    // Auto spin
    async function autoSpinLoop() {
      while (autoSpin) {
        await spin();
        await new Promise(r => setTimeout(r, 1500));
      }
    }

    function toggleAutoSpin() {
      autoSpin = !autoSpin;
      autoSpinBtn.textContent = autoSpin ? "Stop Auto Spin" : "Auto Spin: OFF";
      if (autoSpin) autoSpinLoop();
    }

    // Bet change
    betSelect.addEventListener("change", () => {
      bet = betSelect.value === "max" ? credits : parseInt(betSelect.value);
      updateUI();
    });

    // Events
    spinBtn.addEventListener("click", spin);
    autoSpinBtn.addEventListener("click", toggleAutoSpin);

    // Init
    updateUI();
  </script>
</body>
</html>
